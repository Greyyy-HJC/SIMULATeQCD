<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to compile &mdash; SIMULATeQCD 0.7 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to run" href="03_run.html" />
    <link rel="prev" title="How to download the code" href="01_download.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >
            <a href="../index.html" class="icon icon-home"> SIMULATeQCD
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="gettingStarted.html">Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_download.html">How to download the code</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_run.html">How to run</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02_contributions/contributions.html">Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_applications/applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_codeBase/codeBase.html">Code Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_modules/modules.html">Modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SIMULATeQCD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="gettingStarted.html">Getting started</a> &raquo;</li>
      <li>How to compile</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/01_gettingStarted/02_compile.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="how-to-compile">
<h1>How to compile<a class="headerlink" href="#how-to-compile" title="Permalink to this headline"></a></h1>
<p>The following software is required to compile SIMULATeQCD:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cmake3</span></code> (Some versions have the “–phtread” compiler bug. Versions that definetely work are <a class="reference external" href="https://gitlab.kitware.com/cmake/cmake/tree/">3.14.6</a> v3.14.6 or 3.19.2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C++</span></code> compiler with <code class="docutils literal notranslate"><span class="pre">C++17</span></code> support  (e.g. <code class="docutils literal notranslate"><span class="pre">g++-9</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MPI</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">openmpi-4.0.4</span></code>) and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CUDA</span> <span class="pre">Toolkit</span></code> version 11.0 (NOT 11.1 or 11.2)</p></li>
</ol>
<p>To setup the compilation, create a folder outside of the code directory (e.g. <code class="docutils literal notranslate"><span class="pre">../build/</span></code>) and <em>from there</em> call the following example script (see source:/doc/cmake.sh, you need to manually change this for your machine):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cmake ../simulateqcd/ <span class="se">\</span>
-DARCHITECTURE<span class="o">=</span><span class="s2">&quot;70&quot;</span> <span class="se">\</span>
-DUSE_CUDA_AWARE_MPI<span class="o">=</span>ON <span class="se">\</span>
-DUSE_CUDA_P2P<span class="o">=</span>ON <span class="se">\</span>
</pre></div>
</div>
<p>Here, it is assumed that your source code folder is called <code class="docutils literal notranslate"><span class="pre">simulateqcd</span></code>. <em>Do NOT compile your code in the source code folder!</em>
You can set the path to CUDA by setting the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> parameter <code class="docutils literal notranslate"><span class="pre">-DCUDA_TOOLKIT_ROOT_DIR:PATH</span></code>.
<code class="docutils literal notranslate"><span class="pre">-DARCHITECTURE</span></code> sets the GPU architecture (i.e. <a class="reference external" href="https://en.wikipedia.org/wiki/CUDA#GPUs_supported">compute capability</a> version without the decimal point). For example, “20” will compile for Fermi, “35” for Kepler, “60” for Pascal and “70” for Volta.
Inside the build folder, you can now begin to use <code class="docutils literal notranslate"><span class="pre">make</span></code> to compile your executables, e.g.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make NameOfExecutable
</pre></div>
</div>
<p>If you would like to speed up the compiling process, add the option <code class="docutils literal notranslate"><span class="pre">-j</span></code>, which will compile in parallel using all available CPU threads. You can also specify the number of threads manually using, for example, <code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">4</span></code>.</p>
<section id="compilation-on-bielefeld-gpu-cluster">
<h2>Compilation on Bielefeld GPU cluster<a class="headerlink" href="#compilation-on-bielefeld-gpu-cluster" title="Permalink to this headline"></a></h2>
<p>Loading the appropriate software required to compile on the cluster can be accomplished with <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span></code>. In particular you can</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>module load compilers/gnu
module load mpi/openmpi
module load cuda
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Lukas Mazur.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>